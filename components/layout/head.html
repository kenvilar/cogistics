<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>{{ title | Cogistics }}</title>
<meta name="title" content="{{ metaTitle | Cogistics }}" />
<meta
  name="description"
  content="{{ metaDescription | Cogistics â€” a simple HTML starter with Tailwind CSS and component includes. }}"
/>
<style>
  /* Hide until JS marks the document ready */
  html:not(.ready) {
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s ease;
  }
</style>
<link rel="stylesheet" href="@assets/css/fonts/fonts.css" />
<!--<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4.1.14"></script>-->
<link rel="stylesheet" href="@assets/css/tailwindcss/output.css" />
<link rel="stylesheet" href="@assets/css/custom.css" />
<script>
  (function () {
    const reveal = () => {
      document.documentElement.classList.add("ready");
    };

    const waitForFonts = () =>
      (document.fonts && document.fonts.ready) || Promise.resolve();

    const waitForImages = () => {
      const imgs = Array.from(document.images || []);
      if (imgs.length === 0) return Promise.resolve();
      return Promise.all(
        imgs.map((img) => {
          // Skip lazy images to avoid blocking initial paint unnecessarily
          if (img.loading === "lazy") return Promise.resolve();
          if (img.complete && img.naturalWidth !== 0) return Promise.resolve();
          if (typeof img.decode === "function") {
            return img.decode().catch(() => undefined);
          }
          return new Promise((res) => {
            img.addEventListener("load", () => res(), { once: true });
            img.addEventListener("error", () => res(), { once: true });
          });
        })
      );
    };

    const includesReady = () =>
      (window.__includesReady && typeof window.__includesReady.then === "function")
        ? window.__includesReady
        : Promise.resolve();

    const start = async () => {
      // Wait for includes (dynamic HTML), then fonts and images
      try {
        await includesReady();
      } catch (_) {}
      try {
        await waitForFonts();
      } catch (_) {}
      try {
        await waitForImages();
      } catch (_) {}
      reveal();
    };

    // Kick off once DOM is parsed so document.images is meaningful
    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", start, { once: true });
    } else {
      start();
    }
  })();
</script>
